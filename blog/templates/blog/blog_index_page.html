{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %} template-blogindexpage {% endblock %}

{% block content %}

  <div class="index-page-container">

      <div class="row">
      </div>

      {% with blocks=self.body %}
        {% for block in blocks %}
            {% if block.block_type == 'heading' %}
              <header class="row">
                <h2 class="heading col-12"> {{ block.value }} </h2>
              </header>
            {% elif block.block_type == 'image' %}
              {% image block.value original as image %}
              <div class="row">
                <img src="{{image.url}}" class="single-image" />
              </div>
            {% else %}
               <section class="block-{{ block.block_type }} row">
                 {{ block }}
               </section>
            {% endif %}
        {% endfor %}
      {% endwith %}

      <div class="blog-posts-spacer"></div>

      {% for post in page.get_children.specific %}

          <a href="{% pageurl post %}" class="post row">
            <header class="col-12 post-header">
              <h3> {{ post.title }} </h3>
            </header>
            {% image post.miniature fill-1000x1000 as miniature %}
            <img src="{{ miniature.url }}" class="no-single-lightbox col-12" />
          </a>

          <!-- Blocks if needed -->
          {% for block in post.body %}
          {% endfor %}

      {% endfor %}

    </div>

{% endblock %}
